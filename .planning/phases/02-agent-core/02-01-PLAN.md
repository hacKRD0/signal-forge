---
phase: 02-agent-core
type: execute
---

<objective>
Set up Google ADK agent with system prompts for customer and partner discovery.

Purpose: Initialize the core AI agent using Google ADK that will orchestrate the discovery process with proper system prompts and tool configurations.
Output: Working Google ADK agent with configured system prompts and web search tool access.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@src/config.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Google ADK agent initialization module</name>
  <files>src/agent/__init__.py, src/agent/agent_setup.py</files>
  <action>
Create src/agent/__init__.py (package initialization)

Create src/agent/agent_setup.py:
- Import google.genai for agent setup
- Function: create_discovery_agent() -> Agent
- Initialize Google ADK client with API key from config
- Configure agent with model (use gemini-2.0-flash-exp or latest available)
- Enable web search tool access (Google ADK built-in tool)
- Set generation config: temperature=0.7 (balanced creativity/consistency)
- Return configured agent instance
- Add comprehensive docstring explaining agent capabilities
- Include error handling for API key validation

Avoid: Don't hardcode API keys (use config). Don't use deprecated Google ADK APIs (check latest docs for correct client initialization).
  </action>
  <verify>
- src/agent/agent_setup.py exists
- Imports successfully: python -c "from src.agent.agent_setup import create_discovery_agent"
- Function returns agent instance (test with valid API key would be needed)
  </verify>
  <done>Google ADK agent initialization module created with web search tool access</done>
</task>

<task type="auto">
  <name>Task 2: Create system prompts for customer and partner discovery</name>
  <files>src/agent/prompts.py</files>
  <action>
Create src/agent/prompts.py with system prompts:

CUSTOMER_DISCOVERY_PROMPT:
- Role: AI assistant specialized in finding potential customers
- Task: Analyze business context, identify ideal customer profile
- Capabilities: Use web search to find companies matching criteria
- Output format: Company name, website, locations, size estimate, brief rationale
- Constraints: Only publicly accessible data, no social networks

PARTNER_DISCOVERY_PROMPT:
- Role: AI assistant specialized in finding potential partners
- Task: Analyze business context, identify complementary businesses
- Capabilities: Use web search to find partnership opportunities
- Output format: Company name, website, locations, size estimate, brief rationale
- Constraints: Only publicly accessible data, no social networks

CONTEXT_EXTRACTION_PROMPT:
- Role: Analyze uploaded business documents
- Task: Extract key business info (industry, products, target market, geography)
- Output format: Structured summary of business context

Make prompts clear, specific, and focused. Include examples of good output format inline.

Avoid: Don't make prompts too long (causes degradation). Don't be vague about output format.
  </action>
  <verify>
- src/agent/prompts.py exists
- Contains three prompt constants: CUSTOMER_DISCOVERY_PROMPT, PARTNER_DISCOVERY_PROMPT, CONTEXT_EXTRACTION_PROMPT
- Imports successfully: python -c "from src.agent.prompts import *"
- Each prompt is well-structured and specific
  </verify>
  <done>System prompts created for customer discovery, partner discovery, and context extraction</done>
</task>

<task type="auto">
  <name>Task 3: Create agent wrapper with prompt management</name>
  <files>src/agent/discovery_agent.py</files>
  <action>
Create src/agent/discovery_agent.py:
- Class: DiscoveryAgent
- __init__: Initialize with create_discovery_agent()
- Method: extract_context(document_text: str) -> dict - Uses CONTEXT_EXTRACTION_PROMPT
- Method: find_customers(business_context: dict, filters: dict = None) -> list - Uses CUSTOMER_DISCOVERY_PROMPT
- Method: find_partners(business_context: dict, filters: dict = None) -> list - Uses PARTNER_DISCOVERY_PROMPT
- Each method constructs appropriate prompt with context, sends to agent, parses response
- Include error handling for API failures, rate limits
- Add logging for all agent interactions
- Store prompts and responses for tracing (will connect to tracing system in Phase 6)

Filters parameter: Optional dict with geography, industry filters to narrow search

Avoid: Don't expose raw agent internals. Don't swallow errors - propagate with context. Don't forget to enable tool use for web search.
  </action>
  <verify>
- src/agent/discovery_agent.py exists
- Imports successfully: python -c "from src.agent.discovery_agent import DiscoveryAgent"
- Class has three core methods: extract_context, find_customers, find_partners
- Methods have correct signatures with type hints
  </verify>
  <done>DiscoveryAgent wrapper class created with context extraction and discovery methods</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] src/agent/ directory exists with all modules
- [ ] Agent initialization module imports without errors
- [ ] System prompts defined for all three use cases
- [ ] DiscoveryAgent class created with three core methods
- [ ] Web search tool access configured in agent setup
- [ ] Error handling and logging in place
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Google ADK agent configured and ready to use
- System prompts specific and well-structured
- Agent wrapper provides clean interface for discovery operations
</success_criteria>

<output>
After completion, create `.planning/phases/02-agent-core/02-01-SUMMARY.md`:

# Phase 2 Plan 1: Agent Setup Summary

**Google ADK agent initialized with system prompts**

## Accomplishments
- Created agent initialization with Google ADK
- Configured web search tool access
- Defined system prompts for customer/partner discovery and context extraction
- Built DiscoveryAgent wrapper class

## Files Created/Modified
- `src/agent/__init__.py` - Package initialization
- `src/agent/agent_setup.py` - Google ADK agent creation
- `src/agent/prompts.py` - System prompts
- `src/agent/discovery_agent.py` - Agent wrapper class

## Decisions Made
- Used gemini-2.0-flash-exp model (latest, fast, capable)
- Temperature 0.7 for balanced creativity/consistency
- Three separate prompts for clarity (context extraction, customer discovery, partner discovery)

## Issues Encountered
[Document any issues, or "None"]

## Next Step
Ready for 02-02-PLAN.md (Context extraction from parsed documents)
</output>
